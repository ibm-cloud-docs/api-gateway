---

copyright:
  years: 2018, 2020
lastupdated: "2020-08-07"

keywords: IBM Cloud, API Gateway, API Gateway Lite, API management, authentication, IAM, access management, service ID, API key, user roles, user actions, token, permissions, identity and access management, actions, assigning access

subcollection: api-gateway

---

{:external: target="_blank" .external} 
{:shortdesc: .shortdesc}
{:screen: .screen}
{:pre: .pre}
{:table: .aria-labeledby="caption"}
{:codeblock: .codeblock}
{:tip: .tip}
{:download: .download}

# Managing access for API Gateway
{: #iam}

{{site.data.keyword.apigw_full}} uses {{site.data.keyword.cloud_notm}} Identity & Access Management (IAM) to securely authenticate users and control access to all cloud resources on the {{site.data.keyword.cloud_notm}} platform.
{: shortdesc}

Access to {{site.data.keyword.apigw_full}} service instances for users in your account is controlled by {{site.data.keyword.cloud_notm}} Identity and Access Management (IAM). Every user that accesses the {{site.data.keyword.apigw_short}} service in your account must be assigned an access policy with an IAM role defined. The policy determines what actions a user can perform within the context of the service or instance that you select. The allowable actions are customized and defined by the {{site.data.keyword.cloud_notm}} service as operations that are allowed to be performed on the service. The actions are then mapped to IAM user roles.


## Using IAM for authentication
{: #authentication-iam}

To authenticate a user, {{site.data.keyword.apigw_short}} accepts OAuth tokens generated by the IAM service. No other authentication mechanism is accepted. Users with API keys must first exchange the API key for an access token (described later in this topic) prior to using {{site.data.keyword.apigw_short}} to create and manage APIs. 

APIs created in {{site.data.keyword.apigw_short}} do not use IAM for authentication. Instead, the user who creates the API chooses the method from the options provided by {{site.data.keyword.apigw_short}}, described in Table 1.

| Authentication type | Method | 
| ------------------- | ---------------------- |
| Application         | Uses a customer-defined (or system-generated) API key and optional API secret. Identifies which application is calling the API. |
| User                | Uses access tokens via the standard OAuth2 model. Supports common "social login" implementations (GitHub, Google, Facebook) as well as anything supported by the {{site.data.keyword.cloud_notm}} App ID service.            |
{: caption="Table 1. {{site.data.keyword.apigw_short}} authentication methods" caption-side="top"}


## Using IAM for authorization
{: #authorization-iam}

Authorization in {{site.data.keyword.apigw_short}} strictly follows the {{site.data.keyword.cloud_notm}} guidelines for platform and service roles. 

### Identity and Access Management roles and actions
{: #roles_actions_iam}

Policies enable access to be granted at different levels. Some of the options include the following: 

* Access across all instances of the service in your account
* Access to an individual service instance in your account
* Access to a specific resource within an instance

After you define the scope of the access policy, you assign a role which determines the user's level of access. Review the following tables which outline what actions each role allows within the {{site.data.keyword.apigw_short}} service.

Table 2 details actions that are mapped to platform management roles. Platform management roles enable users to perform tasks on service resources at the platform level; for example, assign user access for the service, create or delete instances, and bind instances to applications.


| Platform management role | Description of actions | 
| ------------------------ | ---------------------- |
| Viewer                   | View an API definition. |
| Editor                   | View an API definition. Create, edit, delete an API. Enable or disable an API. |
| Operator                 | View an API definition. Create, delete, or alter subscriptions attached to an API. | 
| Administrator            | View an API definition. Create, edit, delete an API. Enable or disable an API. Create, delete, or alter subscriptions attached to an API. |
{: caption="Table 2. IAM user roles and actions" caption-side="top"}


Table 3 details actions that are mapped to service access roles. Service access roles enable users access to {{site.data.keyword.apigw_short}} as well as call the {{site.data.keyword.apigw_short}} API.

| Service access role | Description of actions | 
| ------------------- | ---------------------- |
| Reader              | View an API definition. | 
| Writer              | View an API definition. Create, edit, delete an API. |
| Manager             | View an API definition. Create, edit, delete an API. Enable or disable an API. Create, delete, or alter subscriptions attached to an API. | 
{: caption="Table 3. IAM service access roles and actions" caption-side="top"}

For information about assigning user roles in the UI, see [Managing access to resources](/docs/iam?topic=iam-iammanidaccser#iammanidaccser).


## Obtaining an {{site.data.keyword.cloud_notm}} API key and token
{: #apikey_obtain-iam}

For information on obtaining an API key from {{site.data.keyword.cloud_notm}}, see [Creating an API key](/docs/iam?topic=iam-userapikey#create_user_key) and [Creating an API key for a service ID](/docs/iam?topic=iam-serviceidapikeys#create_service_key).

For information on exchanging an API key for an {{site.data.keyword.cloud_notm}} token, see [Generating an {{site.data.keyword.cloud_notm}} IAM token by using an API key](/docs/iam?topic=iam-iamtoken_from_apikey). For information on passing the token to an {{site.data.keyword.cloud_notm}} service, see [Passing an {{site.data.keyword.cloud_notm}} IAM token to authenticate with a service's API](/docs/iam?topic=iam-iamapikeysforservices#token_auth).

### API key best practices
{: #apikey_practices-iam}

API keys are used as the method of authentication to your service, so they must be kept secure. The following best practices help you maintain a secure API key and reduce the chance of publicly exposing credentials that compromise your application.

- Use an API key with the role that is appropriate for the function that you are using.
  When you create an end-user application, consider using an API key with the role Reader for all calls to GET API methods. The Reader role can't perform any destructive or additive functions to the service instance.

- Do not embed the API key directly in code.
  API keys that are embedded in code might be exposed to your users. Instead of embedding the API keys in your application code, consider storing them either in environment variables or in files outside of your source code control system.

- Do not store an API key in files inside your application's source code control system.
  If you store API keys in files, keep the files outside of your application's source code. This practice is particularly important if you use a public source code management system such as GitHub.

- Regenerate your API keys periodically.
  You can create new credentials at any time.

  1. From the resource list, select a service instance.
  2. In the navigation list, click **Service credentials**.

  When you migrate your application to the new credentials, don't forget to delete the old credentials by using the trashcan icon for the credentials that you want to delete.
{: tip}